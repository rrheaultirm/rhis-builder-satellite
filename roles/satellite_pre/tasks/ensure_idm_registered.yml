---

- name: "Ensure /etc/hosts"
  ansible.builtin.lineinfile:
    path: "/etc/hosts"
    line: "{{ ipa_client_dns_servers }}    {{ ipa_server_fqdn }}"

- name: "Ensure idm server is our DNS resolver"
  ansible.builtin.lineinfile:
    path: "/etc/resolv.conf"
    line: "nameserver {{ ipa_client_dns_servers }}"

# role will install client
- name: "Ensure the client configuration"
  ansible.builtin.include_role:
    name: "redhat.rhel_idm.ipaclient"
